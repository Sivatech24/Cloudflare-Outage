<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Cloudflare Server Location Map</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    #map {
        width: 100%;
        height: 100%;
    }
</style>

</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ------- Initialize Map ------
var map = L.map('map').setView([20, 0], 2);

// Tile Layer
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap'
}).addTo(map);

// Cloudflare server coordinates and ping results
var locations = [
    {lat: 1.2872, lon: 103.8507, ip:"103.22.200.1", country:"Singapore", status:"Success", latency:"58 ms"},
    {lat: 10.0029, lon: -84.0, ip:"131.0.72.1", country:"Costa Rica", status:"Success", latency:"N/A"},
    {lat: 52.3759, lon: 4.8975, ip:"141.101.64.1", country:"Netherlands", status:"Fail", latency:"N/A"},
    {lat: -37.8159, lon: 144.9669, ip:"162.158.0.1", country:"Australia", status:"Success", latency:"150 ms"},
    {lat: -26.2309, lon: 28.0583, ip:"197.234.240.1", country:"South Africa", status:"Success", latency:"348 ms"},
    {lat: 37.751, lon: -97.822, ip:"173.245.48.1", country:"United States", status:"Fail", latency:"N/A"},
    {lat: -4.5833, lon: 55.6667, ip:"2c0f:f248::1", country:"Seychelles", status:"Fail", latency:"N/A"}
];

// Add markers
locations.forEach(function(loc){
    var color = loc.status === "Success" ? "green" : "red";

    L.circleMarker([loc.lat, loc.lon], {
        color: color,
        radius: 7,
        fillOpacity: 0.7
    })
    .bindPopup(`
        <b>${loc.ip}</b><br>
        ${loc.country}<br>
        Status: ${loc.status}<br>
        Latency: ${loc.latency}
    `)
    .addTo(map);
});
</script>

</body>
</html>
